---
toc: content
order: 2
title: 闭包的概念
group:
  title: 闭包
nav:
  title: 算法
  path: /algorithm
  order: 3
---

# 闭包

对于前端开发工程师来讲，闭包是一个很难弄懂而且十分难征服的一个概念！因为闭包的生成不仅仅与变量的作用域相关而且与变量的生命周期也有着密切的关系。最后我可以肯定的告诉你，闭包在实际开发的过程中应用十分广泛，所以你**必须要掌握**它。

## 闭包的定义

闭包是指有权访问另一个函数作用域中的变量的函数。**用通俗的话说的就是在一个函数内部创建另一个函数**。

## 闭包的作用

闭包的作用是使得函数拥有状态，即使函数执行结束后，其内部的变量依然存在，并且可以继续访问。

## 代码实例
可能大家光看概念的话不知道闭包是怎么产生的，下面我们通过一个代码实例来说明闭包的产生。

```ts
function add(x : number) {
  return function(y : number) {
    return x + y;
  };
}

var f = add(1);
console.log(f(2)); // 3
```

在上面的代码中，函数`add`接收一个参数`x`，并返回一个函数。这个函数接收一个参数`y`，并返回`x + y`。
这就创造了一个闭包，这个闭包可以访问外部函数`add`的参数`x`。当函数`f`调用时，它会将参数`2`传入函数`add`中，并返回`x + y`，即`3`。

## 闭包的优势

- 闭包可以让我们将函数内部的状态保存起来，从而避免了使用全局变量。
- 闭包的优势在于它可以让我们在函数外部定义函数，从而避免了在函数内部再定义一次函数。
- 让这些变量的值始终保持在内存中。不会在函数调用后被清除

## 闭包的缺点
闭包确实好用，但是也存在一些缺点：
- 闭包会导致内存的泄露，因为闭包会一直存在，直到没有其他变量指向它。
- 由于闭包会是的函数中的变量都被保存到内存中,滥用闭包很容易造成内存消耗过大,导致网页性能问题。解决方法是在退出函数之前，将不再使用的局部变量全部删除。
- 闭包可以使得函数内部的值可以在函数外部进行修改。所以，如果你把父函数当作对象(object)使用，把闭包当作它的公用方法(Public Method)，把内部变量当作它的私有属性(private value)，这时一定要小心，不要随便改变父函数内部变量的值。